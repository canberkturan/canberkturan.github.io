I"E<p>Hello, Iâ€™ll tell my first fix a bug in LibreOffice and how did I fix this bug. I was informed about this bug by a Certified LibreOffice Developer GÃ¼lÅŸah KÃ–SE.</p>

<ul>
  <li>Firstly, Iâ€™m gonna say how to get this error:
    <blockquote>
      <ol>
        <li>Open a new Writer file.</li>
        <li>Insert some text has two or more lines.</li>
        <li>Move the cursor center of any line.</li>
        <li>Go to last line by pressing down arrow key.</li>
        <li>Press again.</li>
        <li>Cursor wonâ€™t move.</li>
      </ol>
    </blockquote>
  </li>
</ul>

<p><br />
<img src="/assets/cursor_bug.gif" style="width: auto; height: auto" />
<br /></p>
<ul>
  <li>If you try these steps on another graphical text editors(like gedit, mousepad etc.), cursor will move to end of the last line.</li>
  <li>When, I started debugging process, I used â€˜git grepâ€™ command to find the source files and functions execute when pressing up or down keys.</li>
  <li>In source directory, I searched â€˜cursorâ€™, â€˜upâ€™, â€˜downâ€™, â€˜updownâ€™ and â€˜moveâ€™ keywords with these lower and upper forms.</li>
  <li>And I found a directory: sw/source/core/crsr/</li>
  <li>After entering the directory, I searched the keywords said before again.</li>
  <li>I reached a couple possible source files: swcrsr.cxx, crsrsh.cxx, editsh.cxx</li>
  <li>I read all parts that includes â€˜upâ€™, â€˜downâ€™ keywords in these files.</li>
  <li>And I found the right function that has expected name: UpDown Function in swcrsr.cxx file</li>
</ul>

<p>After I found the function, my next job was understanding how does this function work.</p>
<ul>
  <li>I read again the function but I didnâ€™t find significant information.</li>
  <li>Next, I put a lot of log functions into the function to find which parts of function run when I go to the last line of document and which parts of does not.</li>
  <li>I found an if-condition processed when I pressed down arrow key at the last line.</li>
  <li>After I found if-condition, I researched to find how to move cursor position.</li>
  <li>And I saw a variable has named as aOldPos.</li>
  <li>I detected type of aOldPos and which values kept by it.</li>
  <li>And I created a new variable that has same type with aOldPos.</li>
  <li>After that, I assigned the right values to new variable.</li>
  <li>And I built and run the LibreOffice again.</li>
</ul>

<p>I entered some text and moved the cursor to the last line of file. Pressed down arrow key again. And results were amazing. It worked. After the surprising, I thought what if I go to first line of the file and press the up arrow key again, what would happen? I tried but it doesnâ€™t worked. Cursor didnâ€™t move. But the solution was simple because UpDown function had a paramether named as bUp. This paramether was taking a boolean value takes the cursor movement direction.(true means up, false means down)</p>

<ul>
  <li>I added an ternary operator checks bUp variable to catch direction of cursor movement and assign the right position.</li>
  <li>If bUp was true, position variable would take 0 value. If wasnâ€™t, position variable would take length of the line.</li>
  <li>I built and run the LibreOffice again.</li>
  <li>I entered some random text, moved the cursor to the last line, pressed down key again. The cursor went to end of the last line as expected. Next, I moved the cursor to the first line, pressed up key again. And It worked, The cursor went to start of the first line.</li>
</ul>

<p><br />
<img src="/assets/cursor_fix.gif" style="width: 100; height: auto" />
<br />
Next of the debugging part, I submitted a patch to LibreOffice and added GÃ¼lÅŸah KÃ¶se as reviewer. After some fixing typos and editing commit messages, She merged my patch. I thank her again from here. If you want to read her blog, you can reach from this <a href="http://www.gulsahkose.com">link</a>.</p>

:ET